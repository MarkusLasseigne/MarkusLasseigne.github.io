<!DOCTYPE HTML>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<style>
			html, body{width:100vw;height:100vh;margin:0;}
			#daCan{
				height:100%;
				width:100%;
				position:absolute;
				top:0;
				left:0;
			}
			#mainMenu{
				width:20vw;
				height:auto;
				flex:auto;
				position:absolute;
				font:bold 2.75vw arial, sans-serif;
				z-index: 1;
			}
			#menuTitle{
				border-bottom:2px solid black;
			}
			button{
				height:100%;
				width:100%;
				flex:auto;
				left:0;
				visibility: inherit;
				font:bold 80% arial, sans-serif;
				background-color:white;
				border-radius:0 6px 0 0;
				border:0;
				border-right:2px solid black;
			}
		</style>
	</head>
	<body id="majgeBody">
		<audio id="coinS"><source src="/projects/coin-collect.wav" type="audio/wav"></source></audio>
		<script>
			var cHeight=window.innerHeight; var cWidth=window.innerWidth;
//			var coinSound=document.querySelector("#coinS");
//			coinSound.volume=0.4;
		</script>
		<script>
			var menuInit={//TODO: Make entire page into this object
				menuList:{
					mainMenu:{type:"DIV",style:"visibility:visible;",parent:"#majgeBody"},
					menuTitle:{type:"DIV",innerText:"Project Majg'e",parent:"#mainMenu"},
					menuTabs:{type:"DIV",parent:"#mainMenu"},
					menuButtons:{type:"DIV",parent:"#mainMenu"},
					menuLevels:{type:"BUTTON",class:"menuButtons",innerText:"Levels",parent:"#menuTabs"},
					menuOptions:{type:"BUTTON",class:"menuButtons",innerText:"Options",parent:"#menuTabs"},
					menuDev:{type:"BUTTON",class:"menuButtons",innerText:"Dev",parent:"#menuTabs"},
					fullscreen:{type:"BUTTON",style:"visibility:hidden;",class:"optionButtons",innerText:"Fullscreen",parent:"#menuButtons"},
					resolution:{type:"BUTTON",style:"visibility:hidden;",class:"devButtons",innerText:"Resolution",parent:"#menuButtons"},
					l1Demo:{type:"BUTTON",class:"gamesButton",innerText:"L1Demo",src:"l1Demo.js",parent:"#menuButtons"},
					l2Bouncing:{type:"BUTTON",class:"gamesButton",innerText:"L2Bouncing",src:"l2Bouncing.js",parent:"#menuButtons"},
					l3Snake:{type:"BUTTON",class:"gamesButton",innerText:"L3Snake",src:"l3Snake.js",parent:"#menuButtons"},
					l4GOL:{type:"BUTTON",class:"gamesButton",innerText:"L4GOL",src:"l4GOL.js",parent:"#menuButtons"},
					l5Blackjack:{type:"BUTTON",class:"gamesButton",innerText:"L5Blackjack",src:"l5Blackjack.js",parent:"#menuButtons"},
				},
				canvasSettings:{
					canvasHeight:window.innerHeight,
					canvasWidth:window.innerWidth,
					coinSound:document.querySelector("#coinS").volume=0.4,
					pageVolume:1
				},
				pageControls:function(){
					window.addEventListener('keydown', function(e){
						e.preventDefault();
						window.keys = (window.keys || []);
						window.keys[e.key] = (e.type == "keydown");
						menuInit.menuSwitch(e.key);
					});
					window.addEventListener('keyup', function(e){
						if(window.keys){
							window.keys[e.key] = (e.type == "keydown");
//							menF(e.key);
						}
					});
					window.addEventListener("click", function(e){
						window.clicks=(window.clicks||[]);
						clickD={cX:e.x, cY:e.y, tStamp:e.timeStamp};
						window.clicks.push(clickD);
						if(window.clicks.length>=3){window.clicks.shift();}
					});
				},
				pageBuild:function(){
					var body = document.querySelector("#majgeBody");
					menuInit.pageControls();
					var refInit=document.createElement("SCRIPT"); refInit.src="refInit.js"; body.appendChild(refInit);
					//Make Menu Box
					for(let iN in menuInit.menuList){ let newHtml;
						for(let inIN in menuInit.menuList[iN]){
							if(inIN=="type"){newHtml=document.createElement(menuInit.menuList[iN][inIN]); newHtml.id=iN;}
							if(inIN=="class"){newHtml.className=menuInit.menuList[iN][inIN];}
							if(inIN=="innerText"){newHtml.innerText=menuInit.menuList[iN][inIN]; newHtml.onclick=function(){menuInit.menuSwitch(menuInit.menuList[iN][inIN]);};}
							if(inIN=="style"){newHtml.style=menuInit.menuList[iN][inIN];}
							if(inIN=="src"){let newScript=document.createElement("SCRIPT"); newScript.src=menuInit.menuList[iN][inIN]; body.appendChild(newScript);}
							if(inIN=="parent"){document.querySelector(menuInit.menuList[iN][inIN]).appendChild(newHtml);}
						}
					}
				},
				menuSwitch:function(to){
					var mMenu = document.querySelectorAll("#mainMenu")[0].style;
					var gButton = document.querySelectorAll(".gamesButton")[0].style;
					var oButtons = document.querySelectorAll(".optionButtons")[0].style;
					var dButtons = document.querySelectorAll(".devButtons")[0].style;
					if(to=="Project Majg'e"||to=="Escape"){if(mMenu.visibility=="visible"){mMenu.visibility="hidden";}else{mMenu.visibility="visible";}}
					if(to=="Levels"){gButton.visibility="visible"; oButtons.visibility="hidden"; dButtons.visibility="hidden";}
					if(to=="Options"){gButton.visibility="hidden"; oButtons.visibility="visible"; dButtons.visibility="hidden";}
					if(to=="Dev"){gButton.visibility="hidden"; oButtons.visibility="hidden"; dButtons.visibility="visible";}
					if(to=="Fullscreen"){document.querySelector('body').requestFullscreen();}
					if(to=="Resolution"){return document.querySelector('#resolution').innerText=window.innerWidth+'x'+window.innerHeight;}
					if(to=="L1Demo"){l1Demo();}
					if(to=="L2Bouncing"){l2Bouncing();}
					if(to=="L3Snake"){l3Snake();}
					if(to=="L4GOL"){l4GOL();}
					if(to=="L5Blackjack"){l5Blackjack();}
					if(to=="r"||to=="F5"){location.reload();}
					if(to=="c"){console.clear();}
				}
			}; menuInit.pageBuild();
//&#9776;⚙️
		</script>
		<canvas id="daCan"></canvas>
	</body>
</html>